<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sorteo Chain Ec</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <style>

        .btn-sorteo{
            width: 200px;
            height: 200px;
            border-radius: 50%;
            text-transform: uppercase;
            font-size: 1.2rem;
            font-weight: bold;
            background: #2b2b2b;
        }

        .btn-sorteo:hover{
            background: #424242;
        }

        .btn-sorteo:activate{
            color: #a1a1a1;
            background: #5c5c5c;
        }

    </style>

</head>
<body class="bg-light" style="max-height:100vh">
    <div class="container">
        <div class="row align-items-center" style="height:95vh">
            <div class="col">

                <p class="text-center mt-5">
                    <img width="50%" class="img-fluid" src="https://cleibertmora.com/wp-content/uploads/2021/11/chainec-02.png" alt="">
                </p>

                <div class="card bg-warning shadow-lg mt-5">
                    <div class="card-body text-center">
                        <h3 class="my-4">Sorteo de Cupos para 
                            "Introducción A La Economía Digital"</h3>

                        <p class="text-center">
                            <button id="sortear" class="btn btn-sorteo text-white shadow-lg" type="button">¡Buscar el Siguiente Ganador!</button>
                        </p>
                    </div>
                </div>

                <p class="text-center mt-5">
                    <img width="50%" class="img-fluid" src="https://cleibertmora.com/wp-content/uploads/2021/11/LOGOGW.png" alt="">
                </p>
            </div>
            <div class="col">
                <div class="card shadow-lg">
                    <div class="card-body" style="max-height:80vh; overflow-y:auto">
                        <h5 class="text-center mb-4">Ganadores:</h5>
                        <img id="loading" style="display: none;" class="img-fluid" class="" src="https://cdn.dribbble.com/users/1186261/screenshots/3718681/_______.gif">
                        <ol id="listado-ganadores" class="list-group list-group-numbered">
                            
                          </ol>
                    </div>
                    <div class="card-footer">
                        Sorteo ChainEc & Gold Working
                    </div>
                </div>
            </div>
        </div>
        <p class="text-center text-secondary">ChainEc © 2021 | En Alianza con Gold Working
        </p>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
      var json = "[{\"id\":\"1\",\"nombre\":\"Erwin Pullay\",\"correo\":\"Danielpullay55@gmail.com \",\"telefono\":\"0962705869\"},{\"id\":\"2\",\"nombre\":\"Daniel Tumbaco\",\"correo\":\"Daniel_tumbaco@hotmail.com\",\"telefono\":\"0961080192\"},{\"id\":\"3\",\"nombre\":\"Saskia García \",\"correo\":\"saskia03garcia@gmail.com \",\"telefono\":\"0995382117\"},{\"id\":\"4\",\"nombre\":\"Gustavo Velasco \",\"correo\":\"gusvelasco14@gmail.com\",\"telefono\":\"0959604939\"},{\"id\":\"5\",\"nombre\":\"Miguel Ángel Rivas Morales\",\"correo\":\"mangelrivasm@hotmail.com\",\"telefono\":\"0996758619\"},{\"id\":\"6\",\"nombre\":\"Julio Guananga\",\"correo\":\"jguanangab@gmail.com\",\"telefono\":\"0988906736\"},{\"id\":\"7\",\"nombre\":\"Sara Coronel\",\"correo\":\"saramaritcoronel@gmail.com\",\"telefono\":\"0980791074\"},{\"id\":\"8\",\"nombre\":\"PABLO JIMENEZ\",\"correo\":\"papojimenez@hotmail.com\",\"telefono\":\"0999508759\"},{\"id\":\"9\",\"nombre\":\"Boris\",\"correo\":\"Boris-montoya_7@hotmail.com \",\"telefono\":\"0979789900\"},{\"id\":\"10\",\"nombre\":\"Steven Mera\",\"correo\":\"steckmera@gmail.com\",\"telefono\":\"0995403171\"},{\"id\":\"11\",\"nombre\":\"Evelin Carolina Morocho Mera\",\"correo\":\"Evelin.morocho@yahoo.com\",\"telefono\":\"0958731094\"},{\"id\":\"12\",\"nombre\":\"Maivelyn Montoya\",\"correo\":\"marilynm74l@gmail.com\",\"telefono\":\"0994340481\"},{\"id\":\"13\",\"nombre\":\"Jaime Ricardo Villacrés Michilena\",\"correo\":\"jotavilla93@hotmail.com\",\"telefono\":\"0959257680\"},{\"id\":\"14\",\"nombre\":\"Saskia García \",\"correo\":\"saskia03garcia@gmail.com \",\"telefono\":\"0995382117\"},{\"id\":\"15\",\"nombre\":\"Lorena Tacury\",\"correo\":\"lore.tm@gmail.com\",\"telefono\":\"099 996 5488 \"},{\"id\":\"16\",\"nombre\":\"Nicole\",\"correo\":\"nicolesuago@outlook.com\",\"telefono\":\"0987445108\"},{\"id\":\"17\",\"nombre\":\"María José Villavicencio \",\"correo\":\"Mvillavicencio0304@outlook.es \",\"telefono\":\"0994905441\"},{\"id\":\"18\",\"nombre\":\"William \",\"correo\":\"tandazo@gmail.com\",\"telefono\":\"0978646118\"},{\"id\":\"19\",\"nombre\":\"Karen Pico\",\"correo\":\"cynthipame@gmail.com \",\"telefono\":\"0984847087\"},{\"id\":\"20\",\"nombre\":\"Diana Barzola Loor\",\"correo\":\"Diana_barzolaloor@outlook.com\",\"telefono\":\"0988537911\"},{\"id\":\"21\",\"nombre\":\"Christian Sarmiento\",\"correo\":\"Christian.sarmiento.tapia@outlook.com\",\"telefono\":\"0958881271\"},{\"id\":\"22\",\"nombre\":\"Roberto Reyes\",\"correo\":\"rrey.robert@gmail.com\",\"telefono\":\"0995987338\"},{\"id\":\"23\",\"nombre\":\"Evelyn Yuniela Solorzano Burgos\",\"correo\":\"yunielasolorzano@gmai.com\",\"telefono\":\"0952768695\"},{\"id\":\"24\",\"nombre\":\"Cindy\",\"correo\":\"Cindydjchacon@gmail.com\",\"telefono\":\"0999142285\"},{\"id\":\"25\",\"nombre\":\"Erwin Borbor \",\"correo\":\"erwinl.borbor@gmail.com \",\"telefono\":\"0991555316\"},{\"id\":\"26\",\"nombre\":\"Katty Ramirez \",\"correo\":\"Kibujes@hotmail.com \",\"telefono\":\"0997889097\"},{\"id\":\"27\",\"nombre\":\"Jinna\",\"correo\":\"jinnasalazar@gmail.com\",\"telefono\":\"0997048337\"},{\"id\":\"28\",\"nombre\":\"Michelle solis\",\"correo\":\"solishidalgo28@gmail.com\",\"telefono\":\"0983805694\"},{\"id\":\"29\",\"nombre\":\"Jorge Steven Plua Alcantaro\",\"correo\":\"jspa_14@outlook.com\",\"telefono\":\"0986617009\"},{\"id\":\"30\",\"nombre\":\"Lenin Castillo\",\"correo\":\"leninhomero@hotmail.com\",\"telefono\":\"0986387435\"}]";
      var data = JSON.parse(json);
      var number = data.length;
      var button = document.getElementById('sortear');
      var list = document.getElementById('listado-ganadores');
      var listJQ = $('#listado-ganadores');
      var alreadyWin = [];
      var count = 0;
      var loading = $('#loading');

      button.addEventListener('click', () => {
        escoger_ganador();
      })

      function escoger_ganador(){
        if(count == 10){
          alert('¡Genial! Ya se han escogido todos los ganadores del sorteo');
          return false;
        }
        var random = Math.floor(Math.random() * number);
        var item = listItem(data[random]);
        var hasWon = alreadyWin.filter(el => el.id == data[random].id);

        if(hasWon.length == 0){
        loading.show();
        listJQ.hide();

        setTimeout(() => {
            list.insertAdjacentHTML('beforeend', item);
            count++;
            
            loading.hide();
            listJQ.show();
            
            alreadyWin.push(data[random]);
          }, 2000);
        }else{
          return false;
        }

      }

      function listItem(ganador){
        return `
              <li class="list-group-item d-flex justify-content-between align-items-start">
                <div class="ms-2 me-auto">
                  <div class="fw-bold">${ganador.nombre}</div>
                  ${ganador.correo} - ${ganador.telefono}
                </div>
              </li>
            `;
      }


    </script>

</body>
</html>